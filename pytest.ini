[pytest]
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
env =
    DATABASE_URL=postgresql+asyncpg://test:test@localhost:5432/test_db
    REDIS_URL=redis://localhost:6379/0
    CELERY_BROKER_URL=redis://localhost:6379/1
    CELERY_RESULT_BACKEND=redis://localhost:6379/2
    AWS_ACCESS_KEY_ID=testing
    AWS_SECRET_ACCESS_KEY=testing
    AWS_REGION=us-east-1
    AWS_S3_BUCKET=test-bucket
    GOOGLE_API_KEY=test-google-key
    JWT_SECRET_KEY=test-jwt-secret-key-min-32-chars-long-for-security
    JWT_ALGORITHM=HS256
    ACCESS_TOKEN_EXPIRE_MINUTES=60
    REFRESH_TOKEN_EXPIRE_DAYS=30
    WORKOS_API_KEY=sk_test_workos_key
    WORKOS_CLIENT_ID=client_test_workos
    WORKOS_REDIRECT_URI=http://localhost:8000/api/v1/auth/sso/callback
    HASH_SALT=test-hash-salt-32-chars-long-min
markers =
    asyncio: marks tests as async (deselect with '-m "not asyncio"')
