# Middleware Configuration Template
# Copy this to your .env file and adjust values as needed

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Enable JSON formatted logs (recommended for production)
JSON_LOGS=true

# Log request bodies (disable in production for performance and privacy)
LOG_REQUEST_BODY=false

# Log response bodies (disable in production for performance and privacy)
LOG_RESPONSE_BODY=false

# Maximum body size to log (bytes)
LOG_MAX_BODY_SIZE=1024

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================

# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Rate limits per time window
RATE_LIMIT_PER_SECOND=10
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# Redis URL for distributed rate limiting
# Format: redis://[[username]:[password]]@localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# ERROR HANDLING CONFIGURATION
# ============================================================================

# Enable debug mode (shows detailed errors, disable in production)
DEBUG=false

# ============================================================================
# EXAMPLE CONFIGURATIONS BY ENVIRONMENT
# ============================================================================

# Development Environment
# -----------------------
# LOG_LEVEL=DEBUG
# JSON_LOGS=false
# LOG_REQUEST_BODY=true
# LOG_RESPONSE_BODY=true
# DEBUG=true
# RATE_LIMIT_ENABLED=false

# Staging Environment
# -------------------
# LOG_LEVEL=INFO
# JSON_LOGS=true
# LOG_REQUEST_BODY=false
# LOG_RESPONSE_BODY=false
# DEBUG=false
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_PER_MINUTE=200
# RATE_LIMIT_PER_HOUR=2000

# Production Environment
# ----------------------
# LOG_LEVEL=WARNING
# JSON_LOGS=true
# LOG_REQUEST_BODY=false
# LOG_RESPONSE_BODY=false
# DEBUG=false
# RATE_LIMIT_ENABLED=true
# RATE_LIMIT_PER_SECOND=10
# RATE_LIMIT_PER_MINUTE=100
# RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# NOTES
# ============================================================================
#
# Security Best Practices:
# 1. Never enable DEBUG in production
# 2. Never log request/response bodies in production
# 3. Always use JSON_LOGS in production for easy parsing
# 4. Keep rate limits conservative and adjust based on monitoring
# 5. Ensure Redis has sufficient memory for rate limiting
#
# Performance Considerations:
# 1. Body logging adds 1-2ms overhead per request
# 2. JSON logging adds ~1ms overhead per request
# 3. Rate limiting adds 1-2ms Redis latency per request
# 4. Adjust LOG_LEVEL to reduce log volume in high-traffic scenarios
#
# Privacy Compliance:
# 1. PII is automatically masked in logs
# 2. IP addresses are partially masked (last octet)
# 3. All sensitive fields (passwords, tokens, etc.) are redacted
# 4. Consider data retention policies for log storage
